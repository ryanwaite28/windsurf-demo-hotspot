<div class="settings-container">
  <div class="settings-sidebar">
    <h2 class="sidebar-title">Settings</h2>
    <nav class="sidebar-nav">
      <a routerLink="/settings" class="sidebar-link">Profile</a>
      <a routerLink="/settings/privacy" class="sidebar-link active">Privacy</a>
      <a routerLink="/settings/security" class="sidebar-link">Security</a>
    </nav>
  </div>

  <div class="settings-content">
    <h1 class="settings-heading">Privacy Settings</h1>

    @if (loading) {
      <p class="loading-text">Loading...</p>
    } @else {
      @if (successMessage) {
        <div class="success-banner">{{ successMessage }}</div>
      }
      @if (errorMessage) {
        <div class="error-banner">{{ errorMessage }}</div>
      }

      <form [formGroup]="privacyForm" (ngSubmit)="onSave()" class="settings-form">
        <div class="form-group">
          <label for="profileVisibility" class="form-label">Who can see your profile</label>
          <select id="profileVisibility" formControlName="profileVisibility" class="form-select">
            @for (opt of visibilityOptions; track opt.value) {
              <option [value]="opt.value">{{ opt.label }}</option>
            }
          </select>
        </div>

        <div class="form-group">
          <label for="postsVisibility" class="form-label">Who can see your posts</label>
          <select id="postsVisibility" formControlName="postsVisibility" class="form-select">
            @for (opt of visibilityOptions; track opt.value) {
              <option [value]="opt.value">{{ opt.label }}</option>
            }
          </select>
        </div>

        <div class="form-group">
          <label for="locationVisibility" class="form-label">Who can see your location</label>
          <select id="locationVisibility" formControlName="locationVisibility" class="form-select">
            @for (opt of visibilityOptions; track opt.value) {
              <option [value]="opt.value">{{ opt.label }}</option>
            }
          </select>
        </div>

        <div class="form-group">
          <label for="phoneVisibility" class="form-label">Who can see your phone number</label>
          <select id="phoneVisibility" formControlName="phoneVisibility" class="form-select">
            @for (opt of visibilityOptions; track opt.value) {
              <option [value]="opt.value">{{ opt.label }}</option>
            }
          </select>
        </div>

        <button type="submit" class="btn btn-primary" [disabled]="saving">
          {{ saving ? 'Saving...' : 'Save Changes' }}
        </button>
      </form>
    }
  </div>
</div>
