# Changelog: 2026-02-27 18:10 EST

## Summary

Added comprehensive Karate API component tests for all backend endpoints. Tests run against the Spring Boot app with H2 in-memory database — no external dependencies required.

## Changes

### Karate API Tests Added
- **Auth API** (12 scenarios): signup (valid, mismatch password, duplicate email, duplicate username, invalid email), login (valid, wrong password, non-existent), refresh token, logout, password reset (existing user, non-existent)
- **User Profile API** (10 scenarios): get profile, not found, update profile, update without auth, duplicate username, privacy settings get/update, security settings get/update, delete account
- **User Social API** (12 scenarios): follow, follow self, follow duplicate, unfollow, unfollow not followed, mute/unmute, block (removes follows), unblock, cannot follow blocker, report, get followers, get following
- **Thread CRUD API** (15 scenarios): create (text, media, poll, empty, no auth), get by id, get not found, edit, edit other user, delete, delete other user, repost, quote, toggle pin, get user threads
- **Thread Interactions API** (10 scenarios): like, like duplicate, unlike, react, change reaction, remove reaction, save/unsave, report, mute/unmute, auth required
- **Comments API** (11 scenarios): create, create no auth, get comments, get on non-existent thread, edit, edit other user, delete, delete other user, report, mute/unmute, comment count
- **Feed API** (4 scenarios): feed from followed users, empty feed, auth required, multiple followed users

### Infrastructure Changes
- Added `karate-junit5` dependency (v1.4.1) to `pom.xml`
- Created `ApiTest.java` runner that boots Spring Boot with test profile and passes port to Karate
- Created `karate-config.js` with base URLs and `createTestUser` helper function
- Created reusable `create-user.feature` helper for test user provisioning
- Updated `SecurityConfig.java` to allow unauthenticated GET on `/api/v1/social/threads/**` and `/api/v1/social/users/**`
- Updated `application-test.yml` to exclude Redis auto-configuration, use random server port, disable SQL logging

### Test Results
- **36 unit tests** passing (unchanged)
- **74 Karate API scenarios** passing (new)
- **110 total tests**, 0 failures

## Notes
- Tests are component tests (mocked DB via H2, no Redis/external deps needed)
- All tests run via `./mvnw test` with no additional setup
- Security config change: thread/user-thread GET endpoints are now publicly accessible (correct behavior — viewing content shouldn't require auth)
